<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gadawangi Web Builder</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link href="css/gwbuilder.css" rel="stylesheet">
  </head>
  <body>
    <section>
      <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="https://gadawangi.com">
            <img src="images/logo-gw.png" />
            <span>Web Builder</span>
          </a>
          <div class="d-flex" role="search">
            <input hidden id ="IdRequestElement" class="form-control me-2" />
            <button class="btn btn-danger" onclick="DownloadPage()">Download</button>
          </div>
        </div>
      </nav>
    </section>
    <section class="py-9 px-10 flex items-start w-full justify-end">
        <div class="GW_sidebar">
          <div onclick ="ShowProduct('navbar')" class="GW_sidebar_item" style="padding-right: 0px;"
            data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Element Navigation bar">
            <div class="flex w-full h-full items-center" style="padding-right: 20px;">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24px" height="24px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <g><path style="opacity:0.501" fill="#000000" d="M 4.5,2.5 C 9.17853,2.33418 13.8452,2.50085 18.5,3C 19,3.5 19.5,4 20,4.5C 20.6667,9.16667 20.6667,13.8333 20,18.5C 19.5,19 19,19.5 18.5,20C 13.8333,20.6667 9.16667,20.6667 4.5,20C 4,19.5 3.5,19 3,18.5C 1.94555,12.8855 2.44555,7.5522 4.5,2.5 Z M 5.5,4.5 C 9.51383,4.33449 13.5138,4.50115 17.5,5C 17.9574,5.41395 18.2907,5.91395 18.5,6.5C 13.8333,7.83333 9.16667,7.83333 4.5,6.5C 4.86273,5.81654 5.19607,5.14987 5.5,4.5 Z M 4.5,9.5 C 9.16667,9.5 13.8333,9.5 18.5,9.5C 18.6641,12.1873 18.4974,14.854 18,17.5C 13.6667,18.8333 9.33333,18.8333 5,17.5C 4.50258,14.854 4.33591,12.1873 4.5,9.5 Z"/></g>
                </svg>
            </div>
          </div>
          <div onclick ="ShowProduct('header')"  class="GW_sidebar_item" style="padding-right: 0px;"
            data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Element Header">
            <div class="flex w-full h-full items-center" style="padding-right: 20px;">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24px" height="24px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <g><path style="opacity:0.507" fill="#000000" d="M 4.5,2.5 C 9.17853,2.33418 13.8452,2.50085 18.5,3C 19,3.5 19.5,4 20,4.5C 20.6667,9.16667 20.6667,13.8333 20,18.5C 19.5,19 19,19.5 18.5,20C 13.8333,20.6667 9.16667,20.6667 4.5,20C 4,19.5 3.5,19 3,18.5C 1.94555,12.8855 2.44555,7.5522 4.5,2.5 Z M 5.5,4.5 C 9.51383,4.33449 13.5138,4.50115 17.5,5C 17.9574,5.41395 18.2907,5.91395 18.5,6.5C 13.8333,7.83333 9.16667,7.83333 4.5,6.5C 4.86273,5.81654 5.19607,5.14987 5.5,4.5 Z M 4.5,9.5 C 9.16667,9.5 13.8333,9.5 18.5,9.5C 18.5,10.8333 18.5,12.1667 18.5,13.5C 13.8333,13.5 9.16667,13.5 4.5,13.5C 4.5,12.1667 4.5,10.8333 4.5,9.5 Z M 4.5,15.5 C 9.21369,15.1734 13.8804,15.5067 18.5,16.5C 18.2907,17.086 17.9574,17.586 17.5,18C 13.5,18.6667 9.5,18.6667 5.5,18C 4.74756,17.3292 4.41423,16.4959 4.5,15.5 Z"/></g>
                </svg>
            </div>
          </div>
          <div onclick ="ShowProduct('content')"  class="GW_sidebar_item" style="padding-right: 0px;"
            data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Element Content">
            <div class="flex w-full h-full items-center" style="padding-right: 20px;">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24px" height="24px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <g><path style="opacity:0.509" fill="#000000" d="M 4.5,2.5 C 9.17853,2.33418 13.8452,2.50085 18.5,3C 19,3.5 19.5,4 20,4.5C 20.6667,9.16667 20.6667,13.8333 20,18.5C 19.5,19 19,19.5 18.5,20C 13.8333,20.6667 9.16667,20.6667 4.5,20C 4,19.5 3.5,19 3,18.5C 1.94555,12.8855 2.44555,7.5522 4.5,2.5 Z M 5.5,4.5 C 9.51383,4.33449 13.5138,4.50115 17.5,5C 17.9574,5.41395 18.2907,5.91395 18.5,6.5C 13.8333,7.83333 9.16667,7.83333 4.5,6.5C 4.86273,5.81654 5.19607,5.14987 5.5,4.5 Z M 4.5,9.5 C 7.5,9.5 10.5,9.5 13.5,9.5C 13.5,12.5 13.5,15.5 13.5,18.5C 10.8127,18.6641 8.14603,18.4974 5.5,18C 4.55621,15.2809 4.22288,12.4475 4.5,9.5 Z M 15.5,9.5 C 16.5,9.5 17.5,9.5 18.5,9.5C 18.6641,12.1873 18.4974,14.854 18,17.5C 17.586,17.9574 17.086,18.2907 16.5,18.5C 15.5159,15.5719 15.1826,12.5719 15.5,9.5 Z"/></g>
                </svg>
            </div>
          </div>
          <div onclick ="ShowProduct('footer')" class="GW_sidebar_item" style="padding-right: 0px;"
            data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Element Footer">
            <div class="flex w-full h-full items-center" style="padding-right: 20px;">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24px" height="24px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <g><path style="opacity:0.503" fill="#000000" d="M 4.5,2.5 C 9.17853,2.33418 13.8452,2.50085 18.5,3C 19,3.5 19.5,4 20,4.5C 20.6667,9.16667 20.6667,13.8333 20,18.5C 19.5,19 19,19.5 18.5,20C 13.8333,20.6667 9.16667,20.6667 4.5,20C 4,19.5 3.5,19 3,18.5C 1.94555,12.8855 2.44555,7.5522 4.5,2.5 Z M 5.5,4.5 C 9.51383,4.33449 13.5138,4.50115 17.5,5C 18.4438,7.71914 18.7771,10.5525 18.5,13.5C 13.8333,13.5 9.16667,13.5 4.5,13.5C 4.26414,10.3915 4.59748,7.39147 5.5,4.5 Z M 4.5,15.5 C 9.21369,15.1734 13.8804,15.5067 18.5,16.5C 18.2907,17.086 17.9574,17.586 17.5,18C 13.5,18.6667 9.5,18.6667 5.5,18C 4.74756,17.3292 4.41423,16.4959 4.5,15.5 Z"/></g>
                </svg>
            </div>
          </div>
          <div onclick ="ShowProduct('page')"  class="GW_sidebar_item" style="padding-right: 0px;"
            data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Page Tamplate">
            <div class="flex w-full h-full items-center" style="padding-right: 20px;">
              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24px" height="24px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g><path style="opacity:0.505" fill="#000000" d="M 4.5,2.5 C 9.17853,2.33418 13.8452,2.50085 18.5,3C 19,3.5 19.5,4 20,4.5C 20.6667,9.16667 20.6667,13.8333 20,18.5C 19.5,19 19,19.5 18.5,20C 13.8333,20.6667 9.16667,20.6667 4.5,20C 4,19.5 3.5,19 3,18.5C 1.94555,12.8855 2.44555,7.5522 4.5,2.5 Z M 5.5,4.5 C 9.51383,4.33449 13.5138,4.50115 17.5,5C 18.3802,6.35613 18.7135,7.85613 18.5,9.5C 16.4086,9.31845 14.4086,9.65178 12.5,10.5C 9.80469,8.05714 7.30469,8.39047 5,11.5C 4.29669,9.07085 4.46336,6.73752 5.5,4.5 Z M 7.5,11.5 C 8.87344,11.3433 10.2068,11.51 11.5,12C 12.672,14.0549 14.3386,14.7216 16.5,14C 13.716,11.9195 14.0493,11.2528 17.5,12C 18.5762,13.7261 18.7429,15.5594 18,17.5C 13.9215,18.6295 9.75483,18.7961 5.5,18C 4.97814,17.4387 4.6448,16.772 4.5,16C 5.31461,14.3566 6.31461,12.8566 7.5,11.5 Z"/></g>
              </svg>

            </div>
          </div>
        </div> <!-- navigation sidebar -->

        <div class="GW_products" id="IdProduct">
          <button onclick ="HideProduct()" class="btn btn-danger" style="position: absolute;top:8px;right: 10px;">
              <span>X</span>
          </button>
          <div class="GW_productsItem" id="idProductItem">
            <!-- tempat render product item-->
          </div>
        </div> <!-- Product Menu Item-->

        <div class="GW_content" style="min-height: auto;">
          <!-- IdContent adalah tempat untuk menampilkan element HTML-->
          <div class="GW_Content_Canvas d-flex flex-column" id="IdContent"></div>
        </div> <!-- Content -->

    </section>
    <section>
      <div id="idModalCode" class="modal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Script HTML</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>
                <input hidden id = "idElementCode" type="text" />
                <textarea id = "idCodeHTML" class="form-control" style=" min-width:400px; max-width:100%;min-height:400px;height:100%;width:100%;" ></textarea>
              </p>
            </div>
            <div class="modal-footer justify-content-between">
              <div>
                <button type="button" class="btn btn-primary" onclick="CopyToCliboard()">Copy</button>
                <button type="button" class="btn btn-danger" onclick="UpdateCode()">Save changes</button>
              </div>
              <div>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script lang="javascript">
        /* untuk menampilkan tooltips*/
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
        
        /* AJAX */

        function createRequestObject() {
            /* Inisiasi fungsi API bawaan dari browser yaitu XMLHttpRequest */
            var ro;
            var browser = navigator.appName;
            if(browser == "Microsoft Internet Explorer"){
                ro = new ActiveXObject("Microsoft.XMLHTTP");
            }else{
                ro = new XMLHttpRequest();
            }
            return ro;
        }

        var http = createRequestObject();

        /* Sesuaikan alamat URL ini dengan alamat URL backend */
        var url_api = 'http://localhost:8080/index.php/api/';

        function sendRequest(method, url_target, jobs, data) {
            /* Open : membuka koneksi ke backend */
            http.open(method, url_api+url_target);
            /* setRequestHeader : konfigurasi request header */
            http.setRequestHeader("Cache-Control", "no-cache");

            /* Eksekusi pengiriman data ke backend */
            http.send(data);

            /* 
              onloadstart : event ketika start memuat data dari backend. 
              Disini ditampilan gambar loading 
            */
            http.onloadstart = function() {
              document.getElementById('idProductItem').appendChild(ShowLoading());
            }

            /* onloadstart : event ketika selesai memuat data dari backend */
            http.onload = function(){
                handleResponse(jobs);
            }
        }

        function handleResponse(jobs) {
          /* Menangani response dari backend */
          if(http.readyState == 4 && http.status == 200){
              var response = http.responseText;
              if(jobs == 'draw-elements')
                DrawElements(response);
          }
        }

        /* Handle UI */
        function ShowProduct(KategoriProduct)
        {
          /* Menampilkan element daftar product */
          var product = document.getElementById("IdProduct");
          product.style.display = "block";

          /* Request daftar product ke backend */
          sendRequest('get', 'elements/'+KategoriProduct.toLowerCase(), 'draw-elements', null);
        }

        function HideProduct()
        {
          /* Menyembunyikan element daftar product */
          var product = document.getElementById("IdProduct");
          product.style.display = "none";
        }

        function ShowLoading() 
        {
          /* Menampilkan gambar loading ketika request dari backend blm selesai */
          var divElement = document.createElement("div");
          divElement.style.textAlign = "center";
          divElement.style.padding = "70px";
          divElement.style.height = "100%";

          var imgElement = document.createElement("img");
          imgElement.src = "images/loading.gif";
        
          divElement.appendChild(imgElement);

          return divElement;
        }

        function DrawElements(response)
        {
          /* Mengosongkan daftar Product Element */
          document.getElementById('idProductItem').innerHTML = "";

          /* Mengkonversi String ke array JSON */
          var dataJson = JSON.parse(response);
          for(i = 0; i < dataJson.length; i++){
            /* 
              Membuat element DIV product item. Isi dari divItem adalah :
               a. Gambar product yg dikirim dari backend
               b. hyperlink (+)
               c. divHTL untuk menampung script HTML dari backend
            */
            var divItem = document.createElement("div");
            divItem.className = "GW_productsItem_item";

            /* Menampilkan gambar product item */
            var imgItem = document.createElement("img");
            imgItem.src = dataJson[i]['image'];
            divItem.appendChild(imgItem);

            /* Menampilkan hyperlink TAMBAH dari daftar product ke Content */
            var aItem = document.createElement("a");
            aItem.href = "#";
            aItem.addEventListener("click", AddElement.bind(event, dataJson[i]['id']));

            /* Menampilkan icon + SVG */
            var svgItem = '<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">';
            svgItem += '<circle cx="18" cy="18" r="18" fill="#FF5525"></circle>';
            svgItem += '<path fill-rule="evenodd" clip-rule="evenodd" d="M18 11.25C18.1989 11.25 18.3897 11.329 18.5303 11.4697C18.671 11.6103 18.75 11.8011 18.75 12V18C18.75 18.1989 18.671 18.3897 18.5303 18.5303C18.3897 18.671 18.1989 18.75 18 18.75H12C11.8011 18.75 11.6103 18.671 11.4697 18.5303C11.329 18.3897 11.25 18.1989 11.25 18C11.25 17.8011 11.329 17.6103 11.4697 17.4697C11.6103 17.329 11.8011 17.25 12 17.25H17.25V12C17.25 11.8011 17.329 11.6103 17.4697 11.4697C17.6103 11.329 17.8011 11.25 18 11.25Z" fill="white">';
            svgItem += '</path>';
            svgItem += '<path fill-rule="evenodd" clip-rule="evenodd" d="M17.25 18C17.25 17.8011 17.329 17.6103 17.4697 17.4697C17.6103 17.329 17.8011 17.25 18 17.25H24C24.1989 17.25 24.3897 17.329 24.5303 17.4697C24.671 17.6103 24.75 17.8011 24.75 18C24.75 18.1989 24.671 18.3897 24.5303 18.5303C24.3897 18.671 24.1989 18.75 24 18.75H18.75V24C18.75 24.1989 18.671 24.3897 18.5303 24.5303C18.3897 24.671 18.1989 24.75 18 24.75C17.8011 24.75 17.6103 24.671 17.4697 24.5303C17.329 24.3897 17.25 24.1989 17.25 24V18Z" fill="white">';
            svgItem += '</path>';
            svgItem += '</svg>';
            aItem.innerHTML = svgItem;
            divItem.appendChild(aItem);

            /* Menampung element HTML dari backend ke div. Hanya div ini di-sebunyikan (hidden) */
            var divHtml = document.createElement("div");
            divHtml.id = "IdProductItem-"+dataJson[i]['id'];
            divHtml.hidden = true;
            divHtml.innerHTML = StringToHTML(dataJson[i]['html']);
            divItem.appendChild(divHtml);

            /* Menambahkan divItem menjadi anaknya divProduct */
            document.getElementById('idProductItem').appendChild(divItem);
          }
        }

        function AddElement(idItem)
        {
          /*Membuat element DIV untuk menampung element HTML */
          var divContent = document.createElement("div");
          divContent.id = "IdElement-"+idItem;
          divContent.className = "GW_content_fill";

          var divFill = document.createElement("div");
          divFill.className = "GW_content_fill_content";
          divFill.id = "IdFillElement-"+idItem;
          divFill.innerHTML = document.getElementById('IdProductItem-'+idItem).innerHTML;
          divContent.appendChild(divFill);

          /* Membuat element DIV untuk menampung pilihan Code dan Hapus Element */
          var divAction = document.createElement('div');
          divAction.className = 'GW_content_action';

          var aCode = document.createElement('a');
          aCode.href = '#';
          aCode.addEventListener("click", ShowCode.bind(event, idItem));
          var svgACode = '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="48px" height="48px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">';
          svgACode += '<g><path style="opacity:0.882" fill="#85c7c3" d="M 14.5,3.5 C 37.3201,0.153078 46.8201,9.81974 43,32.5C 40.8333,37.3333 37.3333,40.8333 32.5,43C 6.85917,46.0186 -1.97417,35.1852 6,10.5C 8.44117,7.54644 11.2745,5.21311 14.5,3.5 Z"/></g>';
          svgACode += '<g><path style="opacity:1" fill="#99cecb" d="M 25.5,14.5 C 25.56,13.9569 25.8933,13.6236 26.5,13.5C 27.2745,15.3964 28.2745,17.063 29.5,18.5C 28.6618,18.8417 28.3284,19.5084 28.5,20.5C 27.0413,20.4326 25.7079,20.7659 24.5,21.5C 25.0138,19.6336 25.6805,17.8003 26.5,16C 26.4301,15.2352 26.0967,14.7352 25.5,14.5 Z"/></g>';
          svgACode += '<g><path style="opacity:1" fill="#daecea" d="M 15.5,18.5 C 16.675,18.281 17.675,18.6143 18.5,19.5C 16.3761,20.458 14.3761,21.6246 12.5,23C 14.3451,24.4229 16.3451,25.5896 18.5,26.5C 14.984,27.0901 11.984,25.9235 9.5,23C 11.3584,21.2453 13.3584,19.7453 15.5,18.5 Z"/></g>';
          svgACode += '<g><path style="opacity:1" fill="#dfeeed" d="M 25.5,14.5 C 26.0967,14.7352 26.4301,15.2352 26.5,16C 25.6805,17.8003 25.0138,19.6336 24.5,21.5C 23.2718,24.9563 21.7718,28.2896 20,31.5C 20.3376,25.3211 22.171,19.6545 25.5,14.5 Z"/></g>';
          svgACode += '<g><path style="opacity:1" fill="#d9ebe9" d="M 29.5,18.5 C 38.8981,21.7035 38.7314,24.7035 29,27.5C 28.5,27.1667 28,26.8333 27.5,26.5C 29.3359,25.081 31.3359,23.9143 33.5,23C 31.8068,22.1534 30.1401,21.3201 28.5,20.5C 28.3284,19.5084 28.6618,18.8417 29.5,18.5 Z"/></g>';
          svgACode += '</svg>';
          aCode.innerHTML = svgACode;
          divAction.appendChild(aCode); 

          var aTrash = document.createElement('a');
          aTrash.href = '#';
          aTrash.addEventListener("click", RemoveElement.bind(event, idItem));
          var svgATrash = '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="48px" height="48px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">';
          svgATrash += '<g><path style="opacity:0.866" fill="#ff416d" d="M 14.5,3.5 C 37.3201,0.153078 46.8201,9.81974 43,32.5C 40.8333,37.3333 37.3333,40.8333 32.5,43C 6.85917,46.0186 -1.97417,35.1852 6,10.5C 8.44117,7.54644 11.2745,5.21311 14.5,3.5 Z"/></g>';
          svgATrash += '<g><path style="opacity:1" fill="#ffd0d6" d="M 28.5,14.5 C 27.8333,18.5 27.1667,18.5 26.5,14.5C 23.6748,14.1616 21.5082,15.1616 20,17.5C 19.5172,16.552 19.3505,15.552 19.5,14.5C 22.3833,11.9103 25.3833,11.9103 28.5,14.5 Z"/></g>';
          svgATrash += '<g><path style="opacity:1" fill="#ff6180" d="M 19.5,14.5 C 19.3505,15.552 19.5172,16.552 20,17.5C 21.5082,15.1616 23.6748,14.1616 26.5,14.5C 27.1667,18.5 27.8333,18.5 28.5,14.5C 29.404,15.209 29.7373,16.209 29.5,17.5C 31.099,17.2322 32.4324,17.5655 33.5,18.5C 27.1667,18.5 20.8333,18.5 14.5,18.5C 15.5676,17.5655 16.901,17.2322 18.5,17.5C 18.2627,16.209 18.596,15.209 19.5,14.5 Z"/></g>';
          svgATrash += '<g><path style="opacity:1" fill="#ffccd3" d="M 14.5,18.5 C 20.8333,18.5 27.1667,18.5 33.5,18.5C 31.9238,22.951 31.0905,27.6177 31,32.5C 26.5868,33.6324 22.0868,33.7991 17.5,33C 17,32.5 16.5,32 16,31.5C 15.7083,27.118 15.2083,22.7847 14.5,18.5 Z"/></g>';
          svgATrash += '<g><path style="opacity:1" fill="#ff436f" d="M 18.5,20.5 C 22.1667,20.5 25.8333,20.5 29.5,20.5C 29.5,24.1667 29.5,27.8333 29.5,31.5C 25.8333,31.5 22.1667,31.5 18.5,31.5C 18.5,27.8333 18.5,24.1667 18.5,20.5 Z"/></g>';
          svgATrash += '</svg>';
          aTrash.innerHTML = svgATrash;
          divAction.appendChild(aTrash); 
          divContent.appendChild(divAction);

          /* Menambahkan diFill, divvAction ke anaknya divContent */
          document.getElementById('IdContent').appendChild(divContent);

          /* Menampung ID element ke text input hidden IdRequestElement */
          var reqElement = document.getElementById('IdRequestElement').value;
          var obj_json;
          if(reqElement == '') {
            obj_json = [];
            obj_json.push({elemen : idItem, user : ''});
            document.getElementById('IdRequestElement').value = JSON.stringify(obj_json);
          } else {
            obj_json = JSON.parse(reqElement);
            obj_json.push({elemen : idItem, user : ''});
            document.getElementById('IdRequestElement').value = JSON.stringify(obj_json);
          }

          HideProduct();
        }

        function ShowCode(idItem)
        {
          let modal = bootstrap.Modal.getOrCreateInstance(document.getElementById('idModalCode')); 
          /* Memindahkan element HTML dari Content ke TextArea */
          document.getElementById('idElementCode').value = idItem;
          document.getElementById('idCodeHTML').value = '';
          document.getElementById('idCodeHTML').value = document.getElementById('IdFillElement-'+idItem).innerHTML;
          modal.show();
        }

        function UpdateCode()
        {
          /* Memindahkan element HTML dari TextArea ke Content */
          let modal = bootstrap.Modal.getOrCreateInstance(document.getElementById('idModalCode'));
          var newCode = document.getElementById('idCodeHTML').value;
          var idTarget = document.getElementById('idElementCode').value;
          document.getElementById('IdFillElement-'+idTarget).innerHTML = newCode;
          modal.hide();
        }
                
        function RemoveElement(idItem)
        {
          /* Menghapus Daftar Element yg ada di Input Hidden IdRequestElement */
          var reqElement = document.getElementById('IdRequestElement').value;

          /* Convert dari String ke array JSON */
          var obj_json;
          obj_json = JSON.parse(reqElement);
          const idxObj = obj_json.findIndex(object => {
            return object.elemen === idItem;
          });

          /* Convert dari array JSON ke string dan tulis ke element input hidden IdRequestElement */
          obj_json.splice(idxObj, 1);
          var ele_selected = JSON.stringify(obj_json);
          if(ele_selected == '[]')
          ele_selected = '';
          document.getElementById('IdRequestElement').value = ele_selected;

          /* Menghapus Element di Content */
          document.getElementById("IdElement-"+idItem).remove();
        }

        function CopyToCliboard()
        {
          /* Men-copy tag HTML di content ke clipboard */
          let modal = bootstrap.Modal.getOrCreateInstance(document.getElementById('idModalCode'));
          var copyCode = document.getElementById('idCodeHTML').value;
          var idTarget = document.getElementById('idElementCode').value;

          navigator.clipboard.writeText(copyCode);
          modal.hide();
        }

        function DownloadPage(){
            var data = document.getElementById('IdRequestElement').value;
            if(data == '') {
              alert("Tidak ada element HTML yang dipilih!");
            }
            else {
              /* Generate page HTML bagian head */
              var docHtml = document.implementation.createHTMLDocument();

              /* Generate meta */
              var meta = document.createElement('meta');
              meta.name = 'viewport';
              meta.content = "width=device-width, initial-scale=1";

              /* Generate title */
              var title = document.createElement("title"); 
              title.innerHTML = 'Gadawangi Web Builder';
              docHtml.head.appendChild(title);

              /* Generate link CSS dgn referensi ke bootstrap */
              var link = document.createElement("link");
              link.href = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css';
              link.rel = 'stylesheet';
              docHtml.head.appendChild(link);

              /*Generate page HTML bagian body */
              var dataJson = JSON.parse(data);
              for(i = 0; i < dataJson.length; i++){
                var section = document.createElement("section");
                section.id = dataJson[i]['elemen'];
                section.innerHTML = document.getElementById('IdFillElement-'+dataJson[i]['elemen']).innerHTML;
                docHtml.body.appendChild(section);
              }

              /* Generate script JS dgn referensi ke bootstrap */
              var jsscript = document.createElement("script");
              jsscript.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js';
              docHtml.body.appendChild(jsscript);
 
              /* Convert Object HTML ke String */
              var htmlFromObj = docHtml.getElementsByTagName('html');
              var htmlString = '<html>'+'\r\n';
              htmlString += htmlFromObj[0].innerHTML+'\r\n';
              htmlString += '</html>';
              
              /* Eksekusi perintah download HTML */
              var blob = new Blob([htmlString], { type: 'text/plain;charset=utf-8' });
              var link = document.createElement('a');
              link.href = window.URL.createObjectURL(blob);
              link.download = "index.html";
              link.click();
            }
        }

        /*
        *****************************
        Fungsi ini digunakan untuk mendownload HTML dari backend.
        Hanya sajafungsi ini sudah tidak digunakan lagi.
        Karena untuk fungsi download, langsung mengambil dari content. 
        Tidak men-download dari backend lagi

        Fungsi ini tidak dihapus, karena disini ada contoh penggunaan metode POST.
        *****************************
        function PostDownload()
        {
          var data = document.getElementById('IdRequestElement').value;
          if(data == '')
            alert("Tidak ada element HTML yang dipilih!");
          else
            sendRequest('post', 'download', 'download-page', data);
        }
        */

        /* Helper */
        function StringToHTML(str)
        {
          /* Convert String ke HTML. Merubah &lt; ke < &gt; ke > dst */
          let txt = new DOMParser().parseFromString(str, "text/html");
          return txt.documentElement.textContent;
        }
    </script>
  </body>
</html>